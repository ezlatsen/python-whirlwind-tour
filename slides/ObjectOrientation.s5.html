<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.8.1: http://docutils.sourceforge.net/" />
<meta name="version" content="S5 1.1" />
<title>Object Oriented Features</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7056 2011-06-17 10:50:48Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
<!-- configuration parameters -->
<meta name="defaultView" content="slideshow" />
<meta name="controlVis" content="hidden" />
<!-- style sheet links -->
<script src="assets/slides.js" type="text/javascript"></script>
<link rel="stylesheet" href="assets/slides.css"
      type="text/css" media="projection" id="slideProj" />
<link rel="stylesheet" href="assets/outline.css"
      type="text/css" media="screen" id="outlineStyle" />
<link rel="stylesheet" href="assets/print.css"
      type="text/css" media="print" id="slidePrint" />
<link rel="stylesheet" href="assets/opera.css"
      type="text/css" media="projection" id="operaFix" />

<style type="text/css">
#currentSlide {display: none;}
</style>
</head>
<body>
<div class="layout">
<div id="controls"></div>
<div id="currentSlide"></div>
<div id="header">

</div>
<div id="footer">
<h1>Object Oriented Features</h1>

</div>
</div>
<div class="presentation">
<div class="slide" id="slide0">
<h1 class="title">Object Oriented Features</h1>

<p>Python has first class support for OO programming, including advanced techniques such as abstract base classes, multiple inheritance, and traits/mixins.</p>
<p><a class="reference external" href="http://docs.python.org/tutorial/classes.html">http://docs.python.org/tutorial/classes.html</a></p>

</div>
<div class="slide" id="simple-classes">
<h1>Simple Classes</h1>
<p>We earlier saw the syntax for creating a new class:</p>
<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span style="color: #007020; font-weight: bold">class</span> <span style="color: #0e84b5; font-weight: bold">LoudTalker</span>(<span style="color: #007020">object</span>):
    <span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">say</span>(<span style="color: #007020">self</span>, message):
        <span style="color: #007020; font-weight: bold">print</span> <span style="color: #4070a0">&quot;</span><span style="color: #70a0d0; font-style: italic">%s</span><span style="color: #4070a0">!&quot;</span> <span style="color: #666666">%</span> message

shouter <span style="color: #666666">=</span> LoudTalker()
shouter<span style="color: #666666">.</span>say(<span style="color: #4070a0">&quot;Hi&quot;</span>) <span style="color: #60a0b0; font-style: italic"># Prints &quot;Hi!&quot;</span>
</pre></div>
<!-- handout

I've added a base class of ``object`` to our ``LoudTalker`` class from before. As I may have explained earlier, the first parameter to ``say()`` will be a reference to the instance of ``LoudTalker`` that ``say`` was called on. This parameter is usually named ``self`` purely as a convention. -->
</div>
<div class="slide" id="classes-attributes">
<h1>Classes Attributes</h1>
<p>Our class is really kind of limited, so let's refactor it a bit:</p>
<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span style="color: #007020; font-weight: bold">class</span> <span style="color: #0e84b5; font-weight: bold">LoudTalker</span>(<span style="color: #007020">object</span>):
    suffix <span style="color: #666666">=</span> <span style="color: #4070a0">&quot;!&quot;</span>

    <span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">say</span>(<span style="color: #007020">self</span>, message):
        <span style="color: #007020; font-weight: bold">print</span> <span style="color: #4070a0">&quot;</span><span style="color: #70a0d0; font-style: italic">%s%s</span><span style="color: #4070a0">&quot;</span> <span style="color: #666666">%</span> (message, <span style="color: #007020">self</span><span style="color: #666666">.</span>suffix)
</pre></div>
<p>Here we've added a class attribute <tt class="docutils literal">suffix</tt>. This can be referenced either via the class object (<tt class="docutils literal">LoudTalker.suffix</tt>) or any class instance (<tt class="docutils literal">self.suffix</tt>).</p>
</div>
<div class="slide" id="classes-attributes-and-inheritance">
<h1>Classes Attributes and Inheritance</h1>
<p>It will also be available via any subclass of <tt class="docutils literal">LoudTalker</tt>:</p>
<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span style="color: #007020; font-weight: bold">class</span> <span style="color: #0e84b5; font-weight: bold">SubLoudTalker</span>(LoudTalker):
    <span style="color: #007020; font-weight: bold">pass</span>

<span style="color: #007020; font-weight: bold">assert</span> SubLoudTalker<span style="color: #666666">.</span>suffix <span style="color: #666666">==</span> <span style="color: #4070a0">&quot;!&quot;</span>

<span style="color: #007020; font-weight: bold">class</span> <span style="color: #0e84b5; font-weight: bold">UnsureTalker</span>(LoudTalker):
    suffix <span style="color: #666666">=</span> <span style="color: #4070a0">&quot;...&quot;</span>

pensively <span style="color: #666666">=</span> UnsureTalker()
pensively<span style="color: #666666">.</span>say(<span style="color: #4070a0">&quot;I&#39;m pretty sure&quot;</span>)
</pre></div>
</div>
<div class="slide" id="init">
<h1>__init__</h1>
<p>Python constructors (actually initializers) are named <tt class="docutils literal">__init__</tt>:</p>
<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span style="color: #007020; font-weight: bold">class</span> <span style="color: #0e84b5; font-weight: bold">Person</span>:
    <span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">__init__</span>(<span style="color: #007020">self</span>, name, age):
        <span style="color: #007020">self</span><span style="color: #666666">.</span>name <span style="color: #666666">=</span> name
        <span style="color: #007020">self</span><span style="color: #666666">.</span>age <span style="color: #666666">=</span> age

stephen <span style="color: #666666">=</span> Person(<span style="color: #4070a0">&#39;Stephen&#39;</span>, <span style="color: #40a070">27</span>)
</pre></div>
<div class="admonition-what-are-constructors handout admonition">
<p class="first admonition-title">What are constructors?</p>
<p class="last">The distinction between constructors and initializers is necessary because there is <em>also</em> a constructor method (named <tt class="docutils literal">__new__</tt>) that is responsible for creating the backing datastructure of the instance. It is rarely used outside of metaclasses.</p>
</div>
</div>
<div class="slide" id="super">
<h1>super(...)</h1>
<p>Sub classes can call parent implementations of methods they've overridden using <tt class="docutils literal">super</tt>. The first argument is the type to &quot;skip&quot; in the hierarchy, the second is the object instance.</p>
<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span style="color: #007020; font-weight: bold">class</span> <span style="color: #0e84b5; font-weight: bold">DoubleTalker</span>(LoudTalker):
    <span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">say</span>(<span style="color: #007020">self</span>, message):
        <span style="color: #007020">super</span>(DoubleTalker, <span style="color: #007020">self</span>)<span style="color: #666666">.</span>say(message)
        <span style="color: #007020">super</span>(DoubleTalker, <span style="color: #007020">self</span>)<span style="color: #666666">.</span>say(message)
</pre></div>
</div>
<div class="slide" id="evolving-apis-with-the-property-decorator">
<h1>Evolving APIs with the &#64;property decorator</h1>
<p>There is an annoyance when creating &quot;record&quot; style objects in most languages, in that using public properties, while simpler and cleaner, leads to a brittle interface for your class.</p>
<p>What if a property name needs to change? Or some goofball writes <tt class="docutils literal">time.minute = 1984</tt>?</p>
<p>Python neatly sidesteps these issues with it's &#64;property decorator...</p>
</div>
<div class="slide" id="property-decorator-example">
<h1>&#64;property decorator example</h1>
<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span style="color: #007020; font-weight: bold">class</span> <span style="color: #0e84b5; font-weight: bold">Person</span>(<span style="color: #007020">object</span>):
    <span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">__init__</span>(<span style="color: #007020">self</span>, name, age):
        <span style="color: #007020">self</span><span style="color: #666666">.</span>name <span style="color: #666666">=</span> name
        <span style="color: #007020">self</span><span style="color: #666666">.</span>age <span style="color: #666666">=</span> age

    <span style="color: #555555; font-weight: bold">@property</span>
    <span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">age</span>(<span style="color: #007020">self</span>): <span style="color: #007020; font-weight: bold">return</span> <span style="color: #007020">self</span><span style="color: #666666">.</span>_age

    <span style="color: #555555; font-weight: bold">@age.setter</span>
    <span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">age</span>(<span style="color: #007020">self</span>, age):
        <span style="color: #007020; font-weight: bold">assert</span> age <span style="color: #666666">&gt;=</span> <span style="color: #40a070">0</span>
        <span style="color: #007020">self</span><span style="color: #666666">.</span>_age <span style="color: #666666">=</span> age
</pre></div>
</div>
<div class="slide" id="abstract-base-classes-pt-1">
<h1>Abstract Base Classes - Pt. 1</h1>
<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span style="color: #007020; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">abc</span> <span style="color: #60a0b0; font-style: italic"># Abstract Base Classes</span>

<span style="color: #007020; font-weight: bold">class</span> <span style="color: #0e84b5; font-weight: bold">AbstractTalker</span>(<span style="color: #007020">object</span>):
    __metaclass__ <span style="color: #666666">=</span> abc<span style="color: #666666">.</span>ABCMeta

    <span style="color: #555555; font-weight: bold">@abc.abstractmethod</span>
    <span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">format</span>(<span style="color: #007020">self</span>, message):
        <span style="color: #007020; font-weight: bold">return</span> message

    <span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">say</span>(<span style="color: #007020">self</span>, message):
        <span style="color: #007020; font-weight: bold">print</span> <span style="color: #007020">self</span><span style="color: #666666">.</span>format(message)
</pre></div>
</div>
<div class="slide" id="abstract-base-classes-pt-2">
<h1>Abstract Base Classes - Pt. 2</h1>
<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span style="color: #007020; font-weight: bold">class</span> <span style="color: #0e84b5; font-weight: bold">LoudTalker</span>(AbstractTalker)
    <span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">format</span>(<span style="color: #007020">self</span>, message):
        <span style="color: #007020; font-weight: bold">return</span> <span style="color: #4070a0">&quot;</span><span style="color: #70a0d0; font-style: italic">%s</span><span style="color: #4070a0">!&quot;</span> <span style="color: #666666">%</span> message

<span style="color: #007020; font-weight: bold">class</span> <span style="color: #0e84b5; font-weight: bold">Screamer</span>(LoudTalker):
    <span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">format</span>(<span style="color: #007020">self</span>, message):
        <span style="color: #007020; font-weight: bold">return</span> <span style="color: #007020">super</span>(Screamer, <span style="color: #007020">self</span>)<span style="color: #666666">.</span>format(message)<span style="color: #666666">.</span>upper()
</pre></div>
<p>An abstract base class cannot be instantiated, and subclasses must implement all methods decorated as abstract.
However, you can provide an implementation for abstract methods, which subclasses can use via <tt class="docutils literal">super</tt>. See <a class="reference external" href="http://docs.python.org/library/abc.html">http://docs.python.org/library/abc.html</a> for more details.</p>
</div>
<div class="slide" id="mixins-multiple-inheritance">
<h1>Mixins/Multiple Inheritance</h1>
<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span style="color: #007020; font-weight: bold">class</span> <span style="color: #0e84b5; font-weight: bold">ShoutFormatterMixin</span>(<span style="color: #007020">object</span>):
    <span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">format</span>(<span style="color: #007020">self</span>, message):
      <span style="color: #007020; font-weight: bold">return</span> <span style="color: #4070a0">&quot;</span><span style="color: #70a0d0; font-style: italic">%s</span><span style="color: #4070a0">!&quot;</span> <span style="color: #666666">%</span> message

<span style="color: #007020; font-weight: bold">class</span> <span style="color: #0e84b5; font-weight: bold">PublicAddressSystem</span>(ShoutFormatterMixin, AbstractTalker):
    <span style="color: #007020; font-weight: bold">def</span> <span style="color: #06287e">play_music</span>(<span style="color: #007020">self</span>, song):
        <span style="color: #007020">super</span>(PublicAddressSystem, <span style="color: #007020">self</span>)<span style="color: #666666">.</span>say(song<span style="color: #666666">.</span>tablature)
</pre></div>
<p>Here we have an example of using a Mixin to compose a small bit of functionality into a class through multiple inheritance, and a subclass using the implementation of <tt class="docutils literal">say</tt> in <tt class="docutils literal">AbstractTalker</tt>.</p>
</div>
<div class="slide" id="wtf-would-you-do-that">
<h1>WTF would you do that?</h1>
<p>By composing the <tt class="docutils literal">format</tt> functionality of <tt class="docutils literal">ShoutFormatterMixin</tt> with the <tt class="docutils literal">say</tt> functionality of <tt class="docutils literal">AbstractTalker</tt> into our <tt class="docutils literal">PublicAddressSystem</tt> class we have:</p>
<ul class="simple">
<li>Given our PA System the ability to make announcements with appropriate formatting.</li>
<li>Completely separated that functionality into other narrowly-focused classes.</li>
<li>Done the above without having to create helper objects for formatting and message printing.</li>
</ul>
</div>
<div class="slide" id="the-end">
<h1>The End</h1>
<p>We touched on a few advanced topics here. In 90% of day-to-day Python code, simple inheritance is all you need...</p>
<p>... but the next time you find yourself dealing with a fragile or bloated base class, consider using Mixins to separate out the various responsibilities and moving their usage closer to the leaf nodes in your type hierarchy. It tends to make the responsibilities of each individual class much more explicit, and potentially removes unused method implementations from that class.</p>
</div>
</div>
</body>
</html>
